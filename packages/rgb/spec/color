#!/bin/sh

test_1() {
  local SUT=$(rgb "$SUT_MESSAGE" $TRUE_RED)

  TRUE_RED="\x1b[38;2;$(toAnsi "$TRUE_RED")m"

  local EXPECT=$(echo -e "$TRUE_RED$SUT_MESSAGE$CLOSE")
  
  assertSame "should print RED color" "$EXPECT" "$SUT"
}

test_2() {
  local SUT=$(rgb "$SUT_MESSAGE" $TRUE_GREEN)

  TRUE_GREEN="\x1b[38;2;$(toAnsi "$TRUE_GREEN")m"

  local EXPECT=$(echo -e "$TRUE_GREEN$SUT_MESSAGE$CLOSE")

  assertSame "should print GREEN color" "$EXPECT" "$SUT"
}

test_3() {
  local SUT=$(rgb "$SUT_MESSAGE" $TRUE_BLUE)
  
  TRUE_BLUE="\x1b[38;2;$(toAnsi "$TRUE_BLUE")m"

  local EXPECT=$(echo -e "$TRUE_BLUE$SUT_MESSAGE$CLOSE")

  assertSame "should print BLUE color" "$EXPECT" "$SUT"
}

test_4() {
  local SUT="$(rgb "$SUT_MESSAGE")"
  local EXPECT=$SUT

  assertSame "should print the input message when color parameters is omited" "$EXPECT" "$SUT"
}

test_5() {
  local SUT=$(rgb)
  local EXPECT=$(echo -e "\x1b[38;2;$(toAnsi "$RED")mit is necessary to pass a message as an argument\x1b[0m")

  assertSame "should throw error when message parameter is empty" "$EXPECT" "$SUT" 
}

. $ROOT_PATH/shunit2